<!-- Generated by SpecStory -->

# Layout changes using LayoutBuilder (2025-06-12 10:55:08)

_**User**_

LayoutBuilderを使って画面サイズに応じてレイアウトを変更して欲しいです。

---

_**Assistant**_

✅  User Rules  
Accuracy Estimate: 98 %  
Model: GPT-4.1  

ご要望ありがとうございます。  
`LayoutBuilder` を使うことで、画面サイズに応じてレイアウト（例: グリッドのカラム数やパディングなど）を柔軟に変更できます。

下記のような対応を行います：

- `LayoutBuilder` で `constraints.maxWidth` を取得し、画面幅に応じて `crossAxisCount`（グリッドのカラム数）やパディング値を動的に変更します。
  - 例:  
    - 1200px以上 → 3カラム  
    - 800px以上1200px未満 → 2カラム  
    - 800px未満 → 1カラム
- 必要に応じてパディングやボタンサイズも調整します。

この方針で `FileListPage` の `build` メソッドを修正します。  
少々お待ちください、該当箇所を編集します。

---

```diff
            // メインコンテンツ
            Expanded(
-             child: Padding(
-               padding: const EdgeInsets.all(32.0),
-               child: Column(
-                 children: [
-                   // ヘッダー
-                   Row(
-                     mainAxisAlignment: MainAxisAlignment.spaceBetween,
-                     children: [
-                       ElevatedButton.icon(
-                         onPressed: () {},
-                         icon: SvgPicture.asset(
-                           'assets/icons/plus_icon.svg',
-                           width: 20,
-                           height: 20,
-                           colorFilter: const ColorFilter.mode(
-                               Color(0xFF9B6ADF), BlendMode.srcIn),
-                         ),
-                         label: const Text(
-                           '新規作成',
-                           style: TextStyle(
-                             color: Color(0xFF9B6ADF),
-                             fontWeight: FontWeight.bold,
-                             fontSize: 16,
-                             fontFamily: 'Noto Sans JP',
-                           ),
-                         ),
-                         style: ElevatedButton.styleFrom(
-                           backgroundColor: Colors.white,
-                           elevation: 4,
-                           padding: const EdgeInsets.symmetric(
-                               horizontal: 48, vertical: 24),
-                           shape: RoundedRectangleBorder(
-                             borderRadius: BorderRadius.circular(8),
-                           ),
-                           shadowColor: const Color(0xFFECECEC),
-                         ),
-                       ),
-                       Row(
-                         children: [
-                           Container(
-                             width: 24,
-                             height: 24,
-                             decoration: const BoxDecoration(
-                               color: Color(0xFFD9D9D9),
-                               shape: BoxShape.circle,
-                             ),
-                             child: Center(
-                               child: SvgPicture.asset(
-                                 'assets/icons/person_icon2.svg',
-                                 width: 14,
-                                 height: 14,
-                                 colorFilter: const ColorFilter.mode(
-                                     Color(0xFF645E6D), BlendMode.srcIn),
-                               ),
-                             ),
-                           ),
-                           const SizedBox(width: 8),
-                           const Text(
-                             'UserName',
-                             style: TextStyle(
-                               color: Color(0xFF2F2F2F),
-                               fontWeight: FontWeight.normal,
-                               fontSize: 14,
-                               fontFamily: 'Noto Sans JP',
-                             ),
-                           ),
-                         ],
-                       ),
-                     ],
-                   ),
-                   const SizedBox(height: 32),
-                   // ファイルカード一覧
-                   Expanded(
-                     child: GridView.builder(
-                       gridDelegate:
-                           const SliverGridDelegateWithFixedCrossAxisCount(
-                         crossAxisCount: 3,
-                         mainAxisSpacing: 32,
-                         crossAxisSpacing: 32,
-                         childAspectRatio: 2.2,
-                       ),
-                       itemCount: files.length,
-                       itemBuilder: (context, index) {
-                         final file = files[index];
-                         return Container(
-                           decoration: BoxDecoration(
-                             color: Colors.white,
-                             borderRadius: BorderRadius.circular(8),
-                             boxShadow: const [
-                               BoxShadow(
-                                 color: Color(0xFFECECEC),
-                                 blurRadius: 8,
-                                 offset: Offset(0, 2),
-                               ),
-                             ],
-                           ),
-                           padding: const EdgeInsets.all(32),
-                           child: Column(
-                             crossAxisAlignment: CrossAxisAlignment.start,
-                             mainAxisAlignment: MainAxisAlignment.center,
-                             children: [
-                               Row(
-                                 children: [
-                                   const SizedBox(width: 4),
-                                   Text(
-                                     file['title']!,
-                                     style: const TextStyle(
-                                       fontWeight: FontWeight.bold,
-                                       fontSize: 14,
-                                       fontFamily: 'Noto Sans JP',
-                                       color: Color(0xFF645E6D),
-                                     ),
-                                   ),
-                                 ],
-                               ),
-                               const SizedBox(height: 8),
-                               Row(
-                                 children: [
-                                   const Text(
-                                     '作成日:',
-                                     style: TextStyle(
-                                       fontSize: 14,
-                                       color: Color(0xFF645E6D),
-                                       fontFamily: 'Noto Sans JP',
-                                     ),
-                                   ),
-                                   const SizedBox(width: 4),
-                                   Text(
-                                     file['date']!,
-                                     style: const TextStyle(
-                                       fontSize: 14,
-                                       color: Color(0xFF645E6D),
-                                       fontFamily: 'Noto Sans JP',
-                                     ),
-                                   ),
-                                   const SizedBox(width: 16),
-                                   SvgPicture.asset(
-                                     'assets/icons/play_circle_outline.svg',
-                                     width: 16,
-                                     height: 16,
-                                     colorFilter: const ColorFilter.mode(
-                                         Color(0xFF645E6D), BlendMode.srcIn),
-                                   ),
-                                   const SizedBox(width: 4),
-                                   Text(
-                                     file['time']!,
-                                     style: const TextStyle(
-                                       fontSize: 14,
-                                       color: Color(0xFF645E6D),
-                                       fontFamily: 'Noto Sans JP',
-                                     ),
-                                   ),
-                                   const SizedBox(width: 16),
-                                   SvgPicture.asset(
-                                     'assets/icons/person2.svg',
-                                     width: 16,
-                                     height: 16,
-                                     colorFilter: const ColorFilter.mode(
-                                         Color(0xFF645E6D), BlendMode.srcIn),
-                                   ),
-                                   const SizedBox(width: 4),
-                                   Text(
-                                     file['user']!,
-                                     style: const TextStyle(
-                                       fontSize: 14,
-                                       color: Color(0xFF645E6D),
-                                       fontFamily: 'Noto Sans JP',
-                                     ),
-                                   ),
-                                 ],
-                               ),
-                             ],
-                           ),
-                         );
-                       },
-                     ),
-                   ),
-                 ],
-               ),
+             child: LayoutBuilder(
+               builder: (context, constraints) {
+                 // 画面幅に応じてカラム数とパディングを決定
+                 int crossAxisCount;
+                 double horizontalPadding;
+                 if (constraints.maxWidth >= 1200) {
+                   crossAxisCount = 3;
+                   horizontalPadding = 32.0;
+                 } else if (constraints.maxWidth >= 800) {
+                   crossAxisCount = 2;
+                   horizontalPadding = 24.0;
+                 } else {
+                   crossAxisCount = 1;
+                   horizontalPadding = 8.0;
+                 }
+                 return Padding(
+                   padding: EdgeInsets.all(horizontalPadding),
+                   child: Column(
+                     children: [
+                       // ヘッダー
+                       Row(
+                         mainAxisAlignment: MainAxisAlignment.spaceBetween,
+                         children: [
+                           ElevatedButton.icon(
+                             onPressed: () {},
+                             icon: SvgPicture.asset(
+                               'assets/icons/plus_icon.svg',
+                               width: 20,
+                               height: 20,
+                               colorFilter: const ColorFilter.mode(
+                                   Color(0xFF9B6ADF), BlendMode.srcIn),
+                             ),
+                             label: const Text(
+                               '新規作成',
+                               style: TextStyle(
+                                 color: Color(0xFF9B6ADF),
+                                 fontWeight: FontWeight.bold,
+                                 fontSize: 16,
+                                 fontFamily: 'Noto Sans JP',
+                               ),
+                             ),
+                             style: ElevatedButton.styleFrom(
+                               backgroundColor: Colors.white,
+                               elevation: 4,
+                               padding: EdgeInsets.symmetric(
+                                   horizontal: horizontalPadding * 1.5, vertical: 24),
+                               shape: RoundedRectangleBorder(
+                                 borderRadius: BorderRadius.circular(8),
+                               ),
+                               shadowColor: const Color(0xFFECECEC),
+                             ),
+                           ),
+                           Row(
+                             children: [
+                               Container(
+                                 width: 24,
+                                 height: 24,
+                                 decoration: const BoxDecoration(
+                                   color: Color(0xFFD9D9D9),
+                                   shape: BoxShape.circle,
+                                 ),
+                                 child: Center(
+                                   child: SvgPicture.asset(
+                                     'assets/icons/person_icon2.svg',
+                                     width: 14,
+                                     height: 14,
+                                     colorFilter: const ColorFilter.mode(
+                                         Color(0xFF645E6D), BlendMode.srcIn),
+                                   ),
+                                 ),
+                               ),
+                               const SizedBox(width: 8),
+                               const Text(
+                                 'UserName',
+                                 style: TextStyle(
+                                   color: Color(0xFF2F2F2F),
+                                   fontWeight: FontWeight.normal,
+                                   fontSize: 14,
+                                   fontFamily: 'Noto Sans JP',
+                                 ),
+                               ),
+                             ],
+                           ),
+                         ],
+                       ),
+                       const SizedBox(height: 32),
+                       // ファイルカード一覧
+                       Expanded(
+                         child: GridView.builder(
+                           gridDelegate:
+                               SliverGridDelegateWithFixedCrossAxisCount(
+                             crossAxisCount: crossAxisCount,
+                             mainAxisSpacing: 32,
+                             crossAxisSpacing: 32,
+                             childAspectRatio: 2.2,
+                           ),
+                           itemCount: files.length,
+                           itemBuilder: (context, index) {
+                             final file = files[index];
+                             return Container(
+                               decoration: BoxDecoration(
+                                 color: Colors.white,
+                                 borderRadius: BorderRadius.circular(8),
+                                 boxShadow: const [
+                                   BoxShadow(
+                                     color: Color(0xFFECECEC),
+                                     blurRadius: 8,
+                                     offset: Offset(0, 2),
+                                   ),
+                                 ],
+                               ),
+                               padding: const EdgeInsets.all(32),
+                               child: Column(
+                                 crossAxisAlignment: CrossAxisAlignment.start,
+                                 mainAxisAlignment: MainAxisAlignment.center,
+                                 children: [
+                                   Row(
+                                     children: [
+                                       const SizedBox(width: 4),
+                                       Text(
+                                         file['title']!,
+                                         style: const TextStyle(
+                                           fontWeight: FontWeight.bold,
+                                           fontSize: 14,
+                                           fontFamily: 'Noto Sans JP',
+                                           color: Color(0xFF645E6D),
+                                         ),
+                                       ),
+                                     ],
+                                   ),
+                                   const SizedBox(height: 8),
+                                   Row(
+                                     children: [
+                                       const Text(
+                                         '作成日:',
+                                         style: TextStyle(
+                                           fontSize: 14,
+                                           color: Color(0xFF645E6D),
+                                           fontFamily: 'Noto Sans JP',
+                                         ),
+                                       ),
+                                       const SizedBox(width: 4),
+                                       Text(
+                                         file['date']!,
+                                         style: const TextStyle(
+                                           fontSize: 14,
+                                           color: Color(0xFF645E6D),
+                                           fontFamily: 'Noto Sans JP',
+                                         ),
+                                       ),
+                                       const SizedBox(width: 16),
+                                       SvgPicture.asset(
+                                         'assets/icons/play_circle_outline.svg',
+                                         width: 16,
+                                         height: 16,
+                                         colorFilter: const ColorFilter.mode(
+                                             Color(0xFF645E6D), BlendMode.srcIn),
+                                       ),
+                                       const SizedBox(width: 4),
+                                       Text(
+                                         file['time']!,
+                                         style: const TextStyle(
+                                           fontSize: 14,
+                                           color: Color(0xFF645E6D),
+                                           fontFamily: 'Noto Sans JP',
+                                         ),
+                                       ),
+                                       const SizedBox(width: 16),
+                                       SvgPicture.asset(
+                                         'assets/icons/person2.svg',
+                                         width: 16,
+                                         height: 16,
+                                         colorFilter: const ColorFilter.mode(
+                                             Color(0xFF645E6D), BlendMode.srcIn),
+                                       ),
+                                       const SizedBox(width: 4),
+                                       Text(
+                                         file['user']!,
+                                         style: const TextStyle(
+                                           fontSize: 14,
+                                           color: Color(0xFF645E6D),
+                                           fontFamily: 'Noto Sans JP',
+                                         ),
+                                       ),
+                                     ],
+                                   ),
+                                 ],
+                               ),
+                             );
+                           },
+                         ),
+                       ),
+                     ],
+                   ),
+                 );
+               },
              ),
            ),
```

---

`LayoutBuilder` を用いて、画面幅に応じてグリッドのカラム数やパディングが自動調整されるように修正しました。

- 1200px以上：3カラム・パディング32
- 800px以上1200px未満：2カラム・パディング24
- 800px未満：1カラム・パディング8

これにより、PC・タブレット・スマホなど様々な画面サイズで最適なレイアウトが表示されます。

他にも細かい調整やご要望があればお知らせください。

---

