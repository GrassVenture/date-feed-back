<!-- Generated by SpecStory -->

# 要件定義書の仕様書作成 (2025-05-04 09:07:09)

_**User**_

@2025-05-03_01-35-要件まとめの仕様書作成.md 

---

_**Assistant**_

要件定義書の内容を確認させていただきました。以下の点について、より詳細な情報を提供させていただきます。

1. **非言語情報の折れ線グラフについて**
- 縦軸は0-100のスケールで「会話の盛り上がり度」を表します
- 以下の要素を組み合わせて算出します：
  - 声のトーンの高さ（0-40点）
  - 話すスピード（0-30点）
  - 笑い声の頻度（0-20点）
  - 相槌の頻度（0-10点）
- 15秒間隔でスコアを計算し、折れ線グラフで表示します

2. **Gemini API呼び出しの詳細**
- 3段階の呼び出しに分けて実装します：
  1. 文字起こし（JSON形式）
  2. 非言語分析（Markdown形式）
  3. フィードバック生成（Markdown形式）
- 各呼び出しは前の結果を参照して、より精度の高い分析を行います

3. **エラーハンドリング**
- アップロード失敗時：
  - ファイル形式エラー：対応形式の説明と再アップロードを促す
  - 容量超過：15分以内の音声を録音するよう案内
- 処理エラー時：
  - リトライを3回試行
  - 失敗時は「申し訳ありません。しばらく時間をおいて再度お試しください」と表示
- Gemini APIエラー時：
  - 代替のプロンプトで再試行
  - 失敗時は部分的な結果のみを表示

4. **ログイン機能**
- パスワードリセット機能はMVPでは実装せず
- ログイン失敗時は「メールアドレスまたはパスワードが正しくありません」と表示
- セッション管理はFirebase Authenticationのデフォルト設定を使用

これらの詳細を要件定義書に追加する必要がありますでしょうか？

---

